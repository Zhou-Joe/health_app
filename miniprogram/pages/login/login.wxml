<!--pages/login/login.wxml-->
<view class="login-container">
  <view class="login-header">
    <text class="app-name">我的健康档案</text>
    <text class="app-desc">AI驱动健康管理及咨询平台</text>
  </view>

  <view class="login-form">
    <!-- 账号密码登录 -->
    <view class="form-item">
      <input class="input-field"
             placeholder="请输入用户名"
             value="{{username}}"
             bindinput="onUsernameInput" />
    </view>

    <view class="form-item">
      <input class="input-field"
             placeholder="请输入密码"
             password
             value="{{password}}"
             bindinput="onPasswordInput" />
    </view>

    <view class="agreement-check">
      <label class="checkbox-label" bindtap="toggleAgreement">
        <checkbox class="agreement-checkbox" value="agreed" checked="{{agreed}}" catchtap="stopCheckboxEvent" />
        <view class="check-content">
          <text class="check-text">我已阅读并同意</text>
          <text class="link-text" catchtap="showUserAgreement">《用户协议》</text>
          <text class="check-text">和</text>
          <text class="link-text" catchtap="showPrivacyPolicy">《隐私政策》</text>
        </view>
      </label>
    </view>

    <button class="login-btn"
            bindtap="handleLogin"
            loading="{{loading}}">
      {{loading ? '登录中...' : '登录'}}
    </button>

    <view class="divider">
      <view class="divider-line"></view>
      <text class="divider-text">或</text>
      <view class="divider-line"></view>
    </view>

    <!-- 微信一键登录 -->
    <button class="wechat-login-btn"
            bindtap="handleWechatLogin"
            loading="{{wechatLoading}}">
      {{wechatLoading ? '登录中...' : '微信一键登录'}}
    </button>
  </view>

  <!-- 自定义弹窗 -->
  <view class="custom-modal" wx:if="{{showModal}}" bindtap="hideModal">
    <view class="modal-content" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">{{modalTitle}}</text>
      </view>
      <scroll-view class="modal-body" scroll-y>
        <text class="modal-text">{{modalContent}}</text>
      </scroll-view>
      <view class="modal-footer">
        <button class="modal-btn" bindtap="hideModal">我知道了</button>
      </view>
    </view>
  </view>
</view>
