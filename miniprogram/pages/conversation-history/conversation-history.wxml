<!--pages/conversation-history/conversation-history.wxml-->
<view class="history-container">
  <!-- é¡¶éƒ¨æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">å’¨è¯¢å†å²</text>
    <text class="page-subtitle">æŸ¥çœ‹æ‰€æœ‰AIå¥åº·å’¨è¯¢è®°å½•</text>
  </view>

  <!-- å¯¹è¯åˆ—è¡¨ -->
  <view class="conversation-list" wx:if="{{conversations.length > 0}}">
    <view class="conversation-item card"
          wx:for="{{conversations}}"
          wx:key="id"
          bindtap="goToConversation"
          data-id="{{item.id}}">
      <view class="item-header">
        <text class="item-title">{{item.title}}</text>
        <view class="item-actions">
          <text class="delete-icon" catchtap="deleteConversation" data-id="{{item.id}}">ğŸ—‘ï¸</text>
        </view>
      </view>

      <view class="item-meta">
        <text class="meta-text">{{item.message_count}}æ¡æ¶ˆæ¯</text>
        <text class="meta-text">{{item.created_at}}</text>
      </view>

      <view class="item-preview" wx:if="{{item.latest_question}}">
        <text class="preview-text">{{item.latest_question}}</text>
      </view>

      <view class="item-footer">
        <text class="view-text">æŸ¥çœ‹å¯¹è¯ â€º</text>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:else>
    <image class="empty-icon" src="/images/empty.png" mode="aspectFit"></image>
    <text class="empty-text">æš‚æ— å’¨è¯¢è®°å½•</text>
    <text class="empty-hint">å¼€å§‹æ‚¨çš„ç¬¬ä¸€æ¬¡AIå¥åº·å’¨è¯¢å§</text>
    <button class="btn-primary mt-20" bindtap="goToAIAdvice">å¼€å§‹å’¨è¯¢</button>
  </view>
</view>
