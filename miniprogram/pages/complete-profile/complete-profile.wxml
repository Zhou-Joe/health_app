<!--pages/complete-profile/complete-profile.wxml-->
<view class="profile-container app-theme">
  <!-- 背景装饰 -->
  <view class="bg-decoration">
    <view class="blob blob-1"></view>
    <view class="blob blob-2"></view>
  </view>

  <!-- 页面头部 -->
  <view class="profile-header">
    <text class="header-emoji">👋</text>
    <view class="header-text">
      <text class="header-title">欢迎!</text>
      <text class="header-desc">完善个人信息获得更好体验</text>
    </view>
  </view>

  <!-- 表单卡片 -->
  <view class="form-card">
    <!-- 昵称 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">👤</text>
        <text class="label-text">昵称</text>
      </view>
      <input class="form-input"
             placeholder="请输入昵称"
             placeholder-class="input-placeholder"
             value="{{nickname}}"
             bindinput="onNicknameInput" />
    </view>

    <!-- 性别 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">⚥</text>
        <text class="label-text">性别</text>
      </view>
      <view class="gender-group">
        <view class="gender-option {{gender === 'male' ? 'active' : ''}}"
              bindtap="selectGender"
              data-gender="male">
          <text class="gender-icon">👨</text>
          <text class="gender-text">男</text>
        </view>
        <view class="gender-option {{gender === 'female' ? 'active' : ''}}"
              bindtap="selectGender"
              data-gender="female">
          <text class="gender-icon">👩</text>
          <text class="gender-text">女</text>
        </view>
      </view>
    </view>

    <!-- 出生日期 -->
    <view class="form-item">
      <view class="form-label">
        <text class="label-icon">📅</text>
        <text class="label-text">出生日期</text>
      </view>
      <picker mode="date"
              value="{{birthDate}}"
              end="{{today}}"
              bindchange="onBirthDateChange">
        <view class="form-picker {{birthDate ? 'has-value' : ''}}">
          <text class="picker-text">{{birthDate || '请选择出生日期'}}</text>
          <text class="picker-arrow">↓</text>
        </view>
      </picker>
    </view>
  </view>

  <!-- 提示 -->
  <view class="tip-card">
    <text class="tip-emoji">💡</text>
    <text class="tip-text">完善信息有助于AI提供更精准的健康建议</text>
  </view>

  <!-- 提交按钮 -->
  <view class="submit-section">
    <button class="submit-btn"
            bindtap="handleSubmit"
            loading="{{submitting}}"
            disabled="{{!nickname || !gender || !birthDate || submitting}}">
      {{submitting ? '提交中...' : '完成设置'}}
    </button>
  </view>
</view>
