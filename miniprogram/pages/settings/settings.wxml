<!--pages/settings/settings.wxml-->
<view class="settings-container">
  <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
  <view class="user-card card">
    <view class="user-avatar">ğŸ‘¤</view>
    <view class="user-info">
      <text class="user-name">{{userInfo.first_name || userInfo.username || 'ç”¨æˆ·'}}</text>
      <text class="user-desc">{{userInfo.email || ''}}</text>
    </view>
  </view>

  <!-- ç³»ç»Ÿè®¾ç½® -->
  <view class="settings-section">
    <view class="section-title">ç³»ç»Ÿè®¾ç½®</view>
    <view class="settings-list card">
      <view class="setting-item">
        <text class="item-label">æœåŠ¡å™¨åœ°å€</text>
        <input class="server-input"
               value="{{serverUrl}}"
               bindinput="onServerUrlChange"
               placeholder="http://localhost:8000" />
      </view>
      <view class="setting-item" bindtap="testConnection">
        <text class="item-label">æµ‹è¯•è¿æ¥</text>
        <text class="item-arrow">â€º</text>
      </view>
      <view class="setting-item" bindtap="checkServicesStatus">
        <text class="item-label">æ£€æŸ¥æœåŠ¡çŠ¶æ€</text>
        <text class="item-arrow">â€º</text>
      </view>
    </view>
  </view>

  <!-- æœåŠ¡çŠ¶æ€ -->
  <view class="settings-section" wx:if="{{servicesStatus.services}}">
    <view class="section-title">æœåŠ¡çŠ¶æ€</view>
    <view class="settings-list card">
      <view class="service-item" wx:for="{{servicesStatus.services}}" wx:key="name">
        <view class="service-info">
          <text class="service-name">{{item.name}}</text>
          <text class="service-status status-{{item.status}}">
            {{item.status === 'available' ? 'æ­£å¸¸' : 'å¼‚å¸¸'}}
          </text>
        </view>
        <view class="service-desc">{{item.description || ''}}</view>
      </view>
    </view>
  </view>

  <!-- æ•°æ®ç®¡ç† -->
  <view class="settings-section">
    <view class="section-title">æ•°æ®ç®¡ç†</view>
    <view class="settings-list card">
      <view class="setting-item" bindtap="clearCache">
        <text class="item-label">æ¸…é™¤ç¼“å­˜</text>
        <text class="item-desc">æ¸…é™¤æ‰€æœ‰æœ¬åœ°ç¼“å­˜æ•°æ®</text>
      </view>
    </view>
  </view>

  <!-- å…¶ä»– -->
  <view class="settings-section">
    <view class="section-title">å…¶ä»–</view>
    <view class="settings-list card">
      <view class="setting-item" bindtap="showAbout">
        <text class="item-label">å…³äº</text>
        <text class="item-value">v1.0.0</text>
      </view>
    </view>
  </view>

  <!-- é€€å‡ºç™»å½• -->
  <view class="action-section">
    <button class="logout-btn" bindtap="handleLogout">é€€å‡ºç™»å½•</button>
  </view>
</view>
