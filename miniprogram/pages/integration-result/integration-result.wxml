<view class="result-container">
  <!-- èƒŒæ™¯è£…é¥° -->
  <view class="bg-decoration">
    <view class="blob blob-1"></view>
    <view class="blob blob-2"></view>
  </view>

  <!-- é¡µé¢å¤´éƒ¨ -->
  <view class="page-header">
    <view class="header-left">
      <text class="header-emoji">âœ…</text>
      <view class="header-text">
        <text class="header-title">æ•´åˆå®Œæˆ</text>
        <text class="header-subtitle">AIåˆ†æç»“æœ</text>
      </view>
    </view>
  </view>

  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stats-grid">
      <view class="stat-item">
        <text class="stat-number">{{result.total_indicators}}</text>
        <text class="stat-label">æ€»æŒ‡æ ‡</text>
      </view>
      <view class="stat-item highlight">
        <text class="stat-number">{{result.changed_count}}</text>
        <text class="stat-label">éœ€ç»Ÿä¸€</text>
      </view>
      <view class="stat-item">
        <text class="stat-number">{{result.unchanged_count}}</text>
        <text class="stat-label">æ— å˜åŒ–</text>
      </view>
    </view>
  </view>

  <!-- å˜æ›´åˆ—è¡¨ -->
  <view class="changes-card">
    <view class="card-title">å˜æ›´è¯¦æƒ…</view>
    <view class="changes-list">
      <block wx:if="{{changes.length > 0}}">
        <view class="change-item {{item.unchanged ? 'unchanged' : 'changed'}}"
              wx:for="{{changes}}"
              wx:key="indicator_id">
          <!-- å˜æ›´å¤´éƒ¨ -->
          <view class="change-header">
            <text class="change-name">{{item.original.indicator_name}}</text>
            <view class="change-badge {{item.unchanged ? 'badge-unchanged' : 'badge-changed'}}">
              <text class="badge-text">{{item.unchanged ? 'æ— å˜åŒ–' : 'éœ€ç»Ÿä¸€'}}</text>
            </view>
          </view>

          <!-- åŸå§‹å€¼ -->
          <view class="original-value">
            <text class="orig-label">åŸå§‹å€¼</text>
            <text class="orig-value">{{item.original.value}} {{item.original.unit}}</text>
          </view>

          <!-- ä¿®æ”¹è¯´æ˜ -->
          <block wx:if="{{!item.unchanged && item.changes}}">
            <view class="changes-detail">
              <view class="change-row" wx:if="{{item.changes.indicator_name}}">
                <text class="row-tag">åç§°</text>
                <text class="row-old">{{item.original.indicator_name}}</text>
                <text class="row-arrow">â†’</text>
                <text class="row-new">{{item.changes.indicator_name}}</text>
              </view>

              <view class="change-row" wx:if="{{item.changes.value}}">
                <text class="row-tag">æ•°å€¼</text>
                <text class="row-old">{{item.original.value}}</text>
                <text class="row-arrow">â†’</text>
                <text class="row-new">{{item.changes.value}}</text>
              </view>

              <view class="change-row" wx:if="{{item.changes.unit}}">
                <text class="row-tag">å•ä½</text>
                <text class="row-old">{{item.original.unit || 'æ— '}}</text>
                <text class="row-arrow">â†’</text>
                <text class="row-new">{{item.changes.unit}}</text>
              </view>

              <view class="change-row" wx:if="{{item.changes.indicator_type}}">
                <text class="row-tag">åˆ†ç±»</text>
                <text class="row-old">{{item.original.indicator_type}}</text>
                <text class="row-arrow">â†’</text>
                <text class="row-new">{{item.changes.indicator_type}}</text>
              </view>
            </view>
          </block>

          <!-- ä¿®æ”¹ç†ç”± -->
          <view class="change-reason" wx:if="{{item.reason}}">
            <text class="reason-emoji">ğŸ’¡</text>
            <text class="reason-text">{{item.reason}}</text>
          </view>
        </view>
      </block>

      <!-- ç©ºçŠ¶æ€ -->
      <view class="empty-state" wx:else>
        <text class="empty-emoji">ğŸ“‹</text>
        <text class="empty-text">æ²¡æœ‰éœ€è¦å˜æ›´çš„æŒ‡æ ‡</text>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-bar">
    <button class="action-btn back-btn" bindtap="goBack">è¿”å›</button>
    <button class="action-btn apply-btn"
            bindtap="applyChanges"
            disabled="{{result.changed_count === 0}}">
      åº”ç”¨æ›´æ”¹ ({{result.changed_count}})
    </button>
  </view>
</view>
